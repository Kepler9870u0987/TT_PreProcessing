# Email Preprocessing Layer - Environment Variables
# Copy this file to .env and fill in the values

# ==============================================================================
# CRITICAL: PII Salt for GDPR Compliance
# ==============================================================================
# This is MANDATORY and must be unique per environment
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# 
# WARNING: Keep this value SECRET and NEVER commit it to version control
# Different environments (dev/staging/prod) must have DIFFERENT salts
PREPROCESSING_PII_SALT=

# ==============================================================================
# Logging Configuration
# ==============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
PREPROCESSING_LOG_LEVEL=INFO

# WARNING: Never enable this in production - it may expose PII
PREPROCESSING_LOG_PII_PREVIEW=false

# ==============================================================================
# PII Detection Settings
# ==============================================================================
# Confidence threshold for NER-based PII detection (0.0 - 1.0)
# Higher values = fewer false positives but lower recall
PREPROCESSING_PII_NER_CONFIDENCE_THRESHOLD=0.75

# Timeout for regex pattern matching (seconds) - prevents ReDoS attacks
PREPROCESSING_PII_REGEX_TIMEOUT_SEC=1

# ==============================================================================
# Canonicalization Settings
# ==============================================================================
# Enable removal of email quotes (>, "Il giorno X ha scritto:", etc.)
PREPROCESSING_REMOVE_QUOTES=true

# Enable removal of signatures and disclaimers
PREPROCESSING_REMOVE_SIGNATURES=true

# Maximum body size for processing (KB) - emails larger will be truncated
PREPROCESSING_MAX_BODY_SIZE_KB=500

# ==============================================================================
# Performance Settings
# ==============================================================================
# Batch size for spaCy NER processing
PREPROCESSING_SPACY_BATCH_SIZE=50

# Number of worker processes for multiprocessing
PREPROCESSING_MULTIPROCESSING_WORKERS=4

# ==============================================================================
# API & Security Settings
# ==============================================================================
# CORS allowed origins (JSON array format)
# Development (default): ["http://localhost:8000", "http://localhost:3000"]
# Production example: ["https://api.yourdomain.com", "https://app.yourdomain.com"]
# WARNING: Never use ["*"] in production!
PREPROCESSING_ALLOWED_ORIGINS=["http://localhost:8000", "http://localhost:3000"]

# ==============================================================================
# Versioning (auto-managed, do not modify)
# ==============================================================================
PREPROCESSING_PARSER_VERSION=email-parser-1.3.0
PREPROCESSING_CANONICALIZATION_VERSION=1.3.0
PREPROCESSING_NER_MODEL_VERSION=it_core_news_lg-3.8.2
PREPROCESSING_PII_REDACTION_VERSION=1.0.0
